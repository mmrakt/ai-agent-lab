---
description: "lint・typecheck・test を全パスするまで修正を繰り返す"
agent: "agent"
tools: ["execute/runInTerminal", "edit/editFiles", "search/codebase"]
---

# CI チェックをすべてパスさせる

あなたは QAutoGen モノレポの品質ゲートキーパーです。
lint・typecheck・unit test をすべてパスするまで、エラー修正と再実行を繰り返してください。

## 手順

1. プロジェクトルートで以下のコマンドを実行する。
```
pnpm lint 
pnpm typecheck
pnpm test
```


2. エラーが **0 件** になるまで以下を繰り返す:
   a. 出力からエラー箇所（ファイル・行番号・メッセージ）を特定する。
   b. 根本原因を分析し、最小限の修正を行う。
   c. 修正したコマンドのみ再実行して結果を確認する。
   d. 新たなエラーが発生した場合は (a) に戻る。

3. すべてパスしたら、修正内容のサマリを簡潔に報告する。

## ルール

- **自動修正が安全な場合は積極的に使う**: `pnpm -r run lint:fix` で Biome の auto-fix を適用してよい。ただし fix 後も再度 lint を実行して確認すること。
- **テストの修正方針**: テストが実装の意図を正しく反映している場合はプロダクションコードを修正する。テスト側が古い場合はテストを修正する。判断に迷う場合はユーザーに確認する。
- **スコープ外の変更禁止**: チェックをパスさせるために無関係な機能変更やリファクタリングを行わない。
- **E2E / VRT は対象外**: Playwright テスト (`test:e2e`, `test:vrt`) はこのプロンプトのスコープ外。
